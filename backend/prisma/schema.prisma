generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id           Int        @id @default(autoincrement())
  nome         String
  email        String     @unique
  senha        String
  isAdmin      Boolean    @default(false)

  chamados     Chamado[]  @relation("CriadorChamados")
  responsaveis Chamado[]  @relation("ResponsavelChamados")
}

model Chamado {
  id             Int       @id @default(autoincrement())
  titulo         String
  descricao      String
  status         String    @default("aberto")
  prioridade     String
  criadoEm       DateTime  @default(now())
  utilizadoEm    DateTime?
  atualizadoEm   DateTime?

  autorId        Int
  autor          Usuario   @relation("CriadorChamados", fields: [autorId], references: [id])

  responsavelId  Int?
  responsavel    Usuario?  @relation("ResponsavelChamados", fields: [responsavelId], references: [id])

  arquivos       Arquivo[] // Relacionamento com v√°rios arquivos
}

model Arquivo {
  id         Int      @id @default(autoincrement())
  nome       String   // nome do arquivo no servidor
  tipo       String   // mime type, ex: image/png, application/pdf
  caminho    String   // caminho relativo ou URL do arquivo
  criadoEm   DateTime @default(now())

  chamadoId  Int
  chamado    Chamado  @relation(fields: [chamadoId], references: [id])
}
